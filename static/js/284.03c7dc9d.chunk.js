"use strict";(self.webpackChunkproin_web=self.webpackChunkproin_web||[]).push([[284],{8330:function(e,t,n){n.d(t,{z:function(){return o}});n(2791);var r=n(1087),a=n(184),o=function(e){var t=e.children,n=e.href,o=e.to,i=e.type,u=void 0===i?"button":i,s=e.size,c=void 0===s?"default":s,l=e.inverse,d=void 0!==l&&l,f=e.danger,p=void 0!==f&&f,v=e.onClick,h=e.disabled,m=void 0!==h&&h,x=e.transparent,y=void 0!==x&&x,b=e.icon,g=void 0!==b&&b,k=e.customClassName,w="button ".concat(k&&"".concat(k)," ").concat(g&&"button__icon"," button--").concat(c," ").concat(d?"button--inverse":""," ").concat(p?"button--danger":""," ").concat(y?"button--transparent":"");return n?(0,a.jsx)("a",{className:w,href:n,children:t}):o?(0,a.jsx)(r.rU,{to:o,className:w,children:t}):(0,a.jsx)("button",{className:w,type:u,onClick:v,disabled:m,children:t})}},5764:function(e,t,n){n.d(t,{I:function(){return f}});var r=n(4942),a=n(1413),o=n(9439),i=n(2791),u=n(8610);var s=n(1243),c=n(9224),l=n(9434),d=n(184),f=function(e){var t=(0,i.useState)({value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=(0,o.Z)(t,2),f=n[0],p=n[1],v=(0,l.I0)(),h=e.id,m=e.onInput,x=f.value,y=f.isValid;(0,i.useEffect)((function(){m(h,x,y)}),[h,x,y,m]),(0,i.useEffect)((function(){e.stateToUpdate&&null!==e.project&&void 0!==e.project&&(e.project[h]&&p((function(t){return(0,a.Z)((0,a.Z)({},t),{},{value:e.project[h]})})))}),[e.project,e.stateToUpdate,h]);var b=(0,i.useCallback)(function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,a)}),t)}}((function(e,t,n){var r=s.Z.CancelToken.source();(0,s.Z)({method:"PATCH",url:"".concat("http://localhost:5000","/projects/").concat(n),data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)},cancelToken:r.token}).then((function(e){var t=e.data;v((0,c.m_)(t.project))})).catch((function(){}))}),1e3),[]),g=function(t){var n=t.target.value;p((function(t){return(0,a.Z)((0,a.Z)({},t),{},{value:n,isValid:e.isAnyValue?e.isAnyValue:(0,u.Gu)(n,e.validators)})})),e.isAutosave&&e.token&&b((0,r.Z)({},h,n),e.token,e.projectId)},k=function(){p((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0})}))},w=(0,i.useRef)(null),I="input"===e.element?(0,d.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:g,onBlur:k,value:f.value}):(0,d.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:g,onBlur:k,value:f.value,ref:w,onClick:function(){var e=w.current;e&&e.requestFullscreen&&e.requestFullscreen()},onKeyDown:function(e){"Escape"===e.key&&document.exitFullscreen()}});return(0,d.jsxs)("div",{className:"form-control ".concat(!e.isAnyValue&&!f.isValid&&f.isTouched&&"form-control--invalid"),children:[(0,d.jsx)("label",{htmlFor:e.id,children:e.label}),I,!e.isAnyValue&&!f.isValid&&f.isTouched&&(0,d.jsx)("p",{children:e.errorText})]})}},6248:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n(184),a=function(e){var t=e.className,n=void 0===t?"":t,a=e.style,o=void 0===a?{}:a,i=e.children;return(0,r.jsx)("div",{className:"card ".concat(n),style:o,children:i})}},2954:function(e,t,n){n.d(t,{c:function(){return i}});var r=n(2791),a=n(9434),o=n(9446),i=function(e,t){var n=(0,a.v9)((function(e){return e.formData})),i=(0,a.I0)();return(0,r.useEffect)((function(){i((0,o.T)({inputs:e,formIsValid:t}))}),[]),{formState:n,inputHandler:(0,r.useCallback)((function(e,t,n){i((0,o.e)({value:t,isValid:n,inputId:e}))}),[i]),setFormData:(0,r.useCallback)((function(e,t){i((0,o.T)({inputs:e,formIsValid:t}))}),[i])}}},9379:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(4165),a=n(5861),o=n(9439),i=n(2791),u=function(){var e=(0,i.useState)(!1),t=(0,o.Z)(e,2),n=t[0],u=t[1],s=(0,i.useState)(),c=(0,o.Z)(s,2),l=c[0],d=c[1],f=(0,i.useRef)([]),p=(0,i.useCallback)(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o,i,s,c,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,o=l.length>3&&void 0!==l[3]?l[3]:{},u(!0),i=new AbortController,f.current.push(i),e.prev=6,e.next=9,fetch(t,{method:n,body:a,headers:o,signal:i.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(c=e.sent,f.current=f.current.filter((function(e){return e!==i})),s.ok){e.next=16;break}throw new Error(c.message);case 16:return u(!1),e.abrupt("return",c);case 20:throw e.prev=20,e.t0=e.catch(6),d(e.t0.message),u(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,i.useEffect)((function(){return function(){f.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:l,sendRequest:p,clearError:function(){d(void 0)}}}},8284:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(4165),a=n(5861),o=n(9439),i=n(2791),u=n(6248),s=n(5764),c=n(8330),l=n(7689),d=n(7401),f=n(8610),p=n(2954),v=n(9379),h=n(9434),m=n(4580),x=n(184),y=function(){var e=(0,i.useState)(!0),t=(0,o.Z)(e,2),n=t[0],y=t[1],b=(0,v.x)(),g=b.isLoading,k=b.sendRequest,w=(0,h.I0)(),I=function(){var e=(0,i.useState)(""),t=(0,o.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)(),u=(0,o.Z)(a,2),s=u[0],c=u[1],l=(0,i.useState)(""),d=(0,o.Z)(l,2),f=d[0],p=d[1],v=(0,h.I0)(),x=(0,i.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date((new Date).getTime()+36e5);r(t),p(e);var a=n;c(a),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),y=(0,i.useCallback)((function(){r(""),c(null),p(""),localStorage.removeItem("userData")}),[]);return(0,i.useEffect)((function(){var e;if(n&&s){var t=s.getTime()-(new Date).getTime();e=setTimeout(y,t)}else clearTimeout(e);return function(){return clearTimeout(e)}}),[n,y,s]),(0,i.useEffect)((function(){var e=localStorage.getItem("userData");if(e){var t=JSON.parse(e);t.token&&new Date(t.expiration)>new Date&&(x(t.userId,t.token,new Date(t.expiration)),v((0,m.x)({userId:t.userId,token:t.token})))}}),[x,v]),{token:n,login:x,logout:y,userId:f}}(),T=I.login,j=(0,l.s0)(),S=(0,p.c)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),Z=S.formState,C=S.inputHandler,N=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,o,i,u,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n){e.next=15;break}return e.prev=2,e.next=5,k("".concat("http://localhost:5000","/users/login"),"POST",JSON.stringify({email:Z.inputs.email.value,password:Z.inputs.password.value}),{"Content-Type":"application/json"});case 5:a=e.sent,j("/"),w((0,m.x)(a)),T(a.userId,a.token),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:e.next=29;break;case 15:return e.prev=15,(u=new FormData).append("email",(null===(o=Z.inputs.email)||void 0===o?void 0:o.value)||""),u.append("password",(null===(i=Z.inputs.password)||void 0===i?void 0:i.value)||""),e.next=21,k("".concat("http://localhost:5000","/users/signup"),"POST",JSON.stringify({email:Z.inputs.email.value,password:Z.inputs.password.value}),{"Content-Type":"application/json"});case 21:s=e.sent,j("/"),w((0,m.x)(s)),T(s.userId,s.token),e.next=29;break;case 27:e.prev=27,e.t1=e.catch(15);case 29:case"end":return e.stop()}}),e,null,[[2,11],[15,27]])})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsx)(i.Fragment,{children:(0,x.jsxs)(u.Z,{className:"authentication",children:[g&&(0,x.jsx)(d.T,{asOverlay:!0}),n?(0,x.jsx)("h2",{children:"\u041b\u043e\u0433\u0456\u043d"}):(0,x.jsx)("h2",{children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("form",{onSubmit:N,children:[(0,x.jsx)(s.I,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[(0,f.Ox)()],errorText:"Please enter a valid email address.",onInput:C}),(0,x.jsx)(s.I,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,f.CP)(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:C}),(0,x.jsx)(c.z,{type:"submit",disabled:!Z.isValid,children:n?"LOGIN":"SIGNUP"})]}),(0,x.jsxs)(c.z,{inverse:!0,onClick:function(){y((function(e){return!e}))},children:["SWITCH TO ",n?"SIGNUP":"LOGIN"]})]})})}},8610:function(e,t,n){n.d(t,{CP:function(){return s},Gu:function(){return l},Ox:function(){return c}});var r=n(7762),a="REQUIRE",o="MINLENGTH",i="MAXLENGTH",u="EMAIL",s=function(e){return{type:o,val:e}},c=function(){return{type:u}},l=function(e,t){var n,s=!0,c=(0,r.Z)(t);try{for(c.s();!(n=c.n()).done;){var l=n.value;l.type===a&&(s=s&&e.trim().length>0),l.type===o&&(s=s&&e.trim().length>=l.val),l.type===i&&(s=s&&e.trim().length<=l.val),"MIN"===l.type&&(s=s&&+e>=l.val),"MAX"===l.type&&(s=s&&+e<=l.val),l.type===u&&(s=s&&/^\S+@\S+\.\S+$/.test(e))}}catch(d){c.e(d)}finally{c.f()}return s}}}]);
//# sourceMappingURL=284.03c7dc9d.chunk.js.map