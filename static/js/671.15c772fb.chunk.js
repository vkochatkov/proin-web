"use strict";(self.webpackChunkproin_web=self.webpackChunkproin_web||[]).push([[671],{8330:function(e,t,n){n.d(t,{z:function(){return o}});n(2791);var r=n(1087),a=n(184),o=function(e){var t=e.children,n=e.href,o=e.to,c=e.type,i=void 0===c?"button":c,u=e.size,s=void 0===u?"default":u,l=e.inverse,d=void 0!==l&&l,f=e.danger,p=void 0!==f&&f,v=e.onClick,h=e.disabled,m=void 0!==h&&h,j=e.transparent,x=void 0!==j&&j,y=e.icon,k=void 0!==y&&y,g=e.customClassName,b="button ".concat(g&&"".concat(g)," ").concat(k&&"button__icon"," button--").concat(s," ").concat(d?"button--inverse":""," ").concat(p?"button--danger":""," ").concat(x?"button--transparent":"");return n?(0,a.jsx)("a",{className:b,href:n,children:t}):o?(0,a.jsx)(r.rU,{to:o,className:b,children:t}):(0,a.jsx)("button",{className:b,type:i,onClick:v,disabled:m,children:t})}},5764:function(e,t,n){n.d(t,{I:function(){return f}});var r=n(4942),a=n(1413),o=n(9439),c=n(2791),i=n(8610);var u=n(1243),s=n(9224),l=n(9434),d=n(184),f=function(e){var t=(0,c.useState)({value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=(0,o.Z)(t,2),f=n[0],p=n[1],v=(0,l.I0)(),h=e.id,m=e.onInput,j=f.value,x=f.isValid;(0,c.useEffect)((function(){m(h,j,x)}),[h,j,x,m]),(0,c.useEffect)((function(){e.stateToUpdate&&null!==e.project&&void 0!==e.project&&(e.project[h]&&p((function(t){return(0,a.Z)((0,a.Z)({},t),{},{value:e.project[h]})})))}),[e.project,e.stateToUpdate,h]);var y=(0,c.useCallback)(function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){e.apply(void 0,a)}),t)}}((function(e,t,n){var r=u.Z.CancelToken.source();(0,u.Z)({method:"PATCH",url:"".concat("http://localhost:5000","/projects/").concat(n),data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)},cancelToken:r.token}).then((function(e){var t=e.data;v((0,s.m_)(t.project))})).catch((function(){}))}),1e3),[]),k=function(t){var n=t.target.value;p((function(t){return(0,a.Z)((0,a.Z)({},t),{},{value:n,isValid:e.isAnyValue?e.isAnyValue:(0,i.Gu)(n,e.validators)})})),e.isAutosave&&e.token&&y((0,r.Z)({},h,n),e.token,e.projectId)},g=function(){p((function(e){return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0})}))},b=(0,c.useRef)(null),T="input"===e.element?(0,d.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:k,onBlur:g,value:f.value}):(0,d.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:k,onBlur:g,value:f.value,ref:b,onClick:function(){var e=b.current;e&&e.requestFullscreen&&e.requestFullscreen()},onKeyDown:function(e){"Escape"===e.key&&document.exitFullscreen()}});return(0,d.jsxs)("div",{className:"form-control ".concat(!e.isAnyValue&&!f.isValid&&f.isTouched&&"form-control--invalid"),children:[(0,d.jsx)("label",{htmlFor:e.id,children:e.label}),T,!e.isAnyValue&&!f.isValid&&f.isTouched&&(0,d.jsx)("p",{children:e.errorText})]})}},453:function(e,t,n){n.d(t,{h:function(){return a}});n(2791);var r=n(184),a=function(e){var t=e.children;return(0,r.jsx)("header",{className:"header",children:t})}},2954:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(2791),a=n(9434),o=n(9446),c=function(e,t){var n=(0,a.v9)((function(e){return e.formData})),c=(0,a.I0)();return(0,r.useEffect)((function(){c((0,o.T)({inputs:e,formIsValid:t}))}),[]),{formState:n,inputHandler:(0,r.useCallback)((function(e,t,n){c((0,o.e)({value:t,isValid:n,inputId:e}))}),[c]),setFormData:(0,r.useCallback)((function(e,t){c((0,o.T)({inputs:e,formIsValid:t}))}),[c])}}},2645:function(e,t,n){n.d(t,{v:function(){return r}});var r=function(e){return e.user}},1671:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(2791),a=n(9434),o=n(7401),c=n(5764),i=n(2954),u=n(4165),s=n(5861),l=n(9439),d=n(1243),f=n(8330),p=n(2645),v=n(9224),h=function(e){return e.mainProjects.currentProject},m=n(5516),j=n(184),x=function(e){var t=e.id,n=e.center,o=e.onInput,c=e.projectId,i=e.stateToUpdate,x=(0,r.useState)(),y=(0,l.Z)(x,2),k=y[0],g=y[1],b=(0,r.useState)(""),T=(0,l.Z)(b,2),C=T[0],I=T[1],Z=(0,r.useState)(!1),N=(0,l.Z)(Z,2),A=N[0],V=N[1],_=(0,a.v9)(p.v).token,w=(0,a.I0)(),E=(0,a.v9)(h),U=(0,r.useRef)(null);(0,r.useEffect)((function(){if(i&&E&&Boolean(E[t])){var e="".concat("http://localhost:5000","/").concat(E[t]);I(e),o(t,e,!0),w((0,m.E)())}}),[E,i]),(0,r.useEffect)((function(){if(k){var e=new FileReader;e.onload=function(){I(e.result)},e.readAsDataURL(k)}}),[k]);var z=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t,n,r){var a,o,c;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.Z.CancelToken.source(),(o=new FormData).append("image",r),e.prev=3,e.next=6,(0,d.Z)({method:"PATCH",url:"".concat("http://localhost:5000","/projects/").concat(t),data:o,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)},cancelToken:a.token});case 6:return c=e.sent,e.abrupt("return",c.data);case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),F=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){var r,a,i,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A,n.target.files&&1===n.target.files.length?(r=n.target.files[0],g(r),V(!0),a=!0):(V(!1),a=!1),!c||!r){e.next=8;break}return e.next=5,z(c,_,r);case 5:s=e.sent,i=s.project.logoUrl,w((0,v.m_)(s.project));case 8:o(t,i,a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("input",{id:t,ref:U,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:F}),(0,j.jsxs)("div",{className:"image-upload ".concat(n?"center":""),children:[C&&(0,j.jsx)("div",{className:"image-upload__preview",children:(0,j.jsx)("img",{src:C,alt:"Preview"})}),(0,j.jsx)(f.z,{type:"button",onClick:function(){var e;null===(e=U.current)||void 0===e||e.click()},children:"\u041e\u0431\u0435\u0440\u0438 \u043b\u043e\u0433\u043e"})]})]})},y=n(7689),k=n(453),g=function(e){return e.isLoading},b=function(){var e=(0,a.v9)(p.v).token,t=(0,a.v9)(g),n=(0,a.v9)(h),u=(0,y.s0)(),s=(0,a.I0)(),l=(0,i.c)({projectName:{value:"",isValid:!0},description:{value:"",isValid:!0}},!0).inputHandler;(0,r.useEffect)((function(){s((0,m.E)())}),[]);var d=function(){u("/")};return(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)(k.h,{children:[(0,j.jsx)(f.z,{size:"small",transparent:!0,icon:!0,customClassName:"header__btn-close",onClick:d,children:(0,j.jsx)("img",{src:"/close.svg",alt:"close_logo",className:"button__icon"})}),(0,j.jsx)(f.z,{customClassName:"header__btn-transparent",onClick:d,children:"\u0421\u0422\u0412\u041e\u0420\u0418\u0422\u0418"})]}),t?(0,j.jsx)(o.T,{}):(0,j.jsx)("div",{children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(x,{center:!0,id:"logoUrl",onInput:l,projectId:n?n._id:void 0,stateToUpdate:!0}),(0,j.jsx)(c.I,{id:"projectName",element:"input",type:"text",label:"\u0406\u043c'\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0443",onInput:l,isAnyValue:!0,isAutosave:!0,projectId:n?n._id:void 0,token:e,stateToUpdate:!0,project:n}),(0,j.jsx)(c.I,{id:"description",element:"textarea",label:"\u041e\u043f\u0438\u0441",onInput:l,isAnyValue:!0,isAutosave:!0,projectId:n?n._id:void 0,token:e,stateToUpdate:!0,project:n})]})})]})}},8610:function(e,t,n){n.d(t,{CP:function(){return u},Gu:function(){return l},Ox:function(){return s}});var r=n(7762),a="REQUIRE",o="MINLENGTH",c="MAXLENGTH",i="EMAIL",u=function(e){return{type:o,val:e}},s=function(){return{type:i}},l=function(e,t){var n,u=!0,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var l=n.value;l.type===a&&(u=u&&e.trim().length>0),l.type===o&&(u=u&&e.trim().length>=l.val),l.type===c&&(u=u&&e.trim().length<=l.val),"MIN"===l.type&&(u=u&&+e>=l.val),"MAX"===l.type&&(u=u&&+e<=l.val),l.type===i&&(u=u&&/^\S+@\S+\.\S+$/.test(e))}}catch(d){s.e(d)}finally{s.f()}return u}}}]);
//# sourceMappingURL=671.15c772fb.chunk.js.map